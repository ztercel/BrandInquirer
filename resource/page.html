<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8" />
    <title>Hello React!</title>
    <script src="https://cdn.staticfile.org/react/16.4.0/umd/react.development.js"></script>
    <script src="https://cdn.staticfile.org/react-dom/16.4.0/umd/react-dom.development.js"></script>
    <script src="https://cdn.staticfile.org/babel-standalone/6.26.0/babel.min.js"></script>
</head>
<body>

<div id="example"></div>
<script type="text/babel">
    class BrandForm extends React.Component {
        constructor(props) {
            super(props);
            this.state = { text: '', type: 'brand', result: '', items: []};

            this.handleChange = this.handleChange.bind(this);
            this.handleSubmit = this.handleSubmit.bind(this);
        }
        getRawMarkup() {

        }

        backListItem(){
            return (
                <table border="1" style={{width:'1000px'}}>
                {
                    this.state.items.map((e,idx)=>(
                        <tr key={idx}>
                            <td style={{fontSize:'20px', fontWeight: '700', height: 22 * e.items.length + 'px', lineHeight: 22 * e.items.length + 'px', textAlign: 'center' }}>{e.name}</td>
                            <td>
                                {
                                    e.items.map((obj)=>(
                                        <div style={{display:'flex'}}>
                                            <div style={{flex:1}}>注册状态：<span style={{color: (obj.status == '未注册') ? 'green' : 'red'}}>{obj.status} </span></div>
                                            <div style={{flex:1}}>注册公司: {obj.company}</div>
                                            <div style={{flex:1}}>注册编号：{obj.no}</div>
                                        </div>
                                    ))
                                }
                            </td>
                        </tr>
                    ))
                }
                </table>
            )
        }

        render() {
            return (
                <div>
                    <h3>商标查询</h3>
                    <form onSubmit={this.handleSubmit} method="post" action >
                        <p><label htmlFor="new-todo">选择类型</label>
                            <select id="type" onChange={this.handleChange}>
                                <option value="brand">商标名</option>
                                <option value="words">候选词</option>
                            </select>
                        </p>
                        <p><textarea id="text" rows="10" cols="100" onChange={this.handleChange}/></p>
                        <button>查询</button>
                        <div id = 'brands'>test</div>
                        {this.backListItem()}
                    </form>
                </div>
            );
        }

        handleChange(e) {
            switch (e.target.id) {
                case 'type':    this.setState({ type: e.target.value }); break;
                case 'text':    this.setState({ text:  e.target.value }); break;
            }
        }
        generate(seeds) {
            let names = [];
            //seeds = _.uniq(seeds);
            for (var head of seeds) {
                for (var tail of seeds) {
                    names.push(head + tail);
                }
            }

            return names;
        }

        handleSubmit(e) {
            e.preventDefault();
            switch (this.state.type) {

            }

            var node=document.getElementById('brands');
             var items = this.generate('在国有');
             console.log(items);

             var items = [ {name: '没没', items: [{company: 'ddd', no:'1212', status: '注册'}] },
                 {name: '声所', items: [{company: 'ddd', no:'1212', status: '未注册'}, {company: 'cccc', no:'1212', status: '注册'}] }];
             this.setState({items});
/*
            var textnode=document.createTextNode(data);
            var entNode = document.createElement('br');
            node.appendChild(entNode);
            node.appendChild(textnode);
*/
            fetch(`http://localhost:3000/`,{
                method: 'POST'
            }).then(res => res.text()).then(
                (data) => {
                    var node=document.getElementById('brands');
                    var textnode=document.createTextNode(data);
                    var entNode = document.createElement('br');
                    node.appendChild(entNode);
                    node.appendChild(textnode);
                    console.log(data);
                });
        }
    }
    ReactDOM.render(<BrandForm />, document.getElementById('example'));
</script>

</body>
</html>

